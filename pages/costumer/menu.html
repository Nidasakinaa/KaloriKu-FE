<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KaloriKu - Makan Sehat Tanpa Ribet!</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../../js/main.js"></script>
    <script type="module" src="../../js/get_menu_user.js"></script>
</head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal">
    <!-- Navbar Start -->
    <nav class="bg-lime-800 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="dashboard_cost.html" class="text-white text-2xl font-bold">KaloriKu</a>
            <div class="space-x-4">
                <a href="dashboard_cost.html" class="text-white hover:text-gray-200">Home</a>
                <a href="menu.html" class="text-white hover:text-gray-200">Menu</a>
                <a href="article.html" class="text-white hover:text-gray-200">Article</a>
                <a href="../form_login.html" class="text-white hover:text-gray-200">Logout</a>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <!-- Product Start -->
    <div class="container mx-auto py-8">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-lime-700 mb-4">Menu Kami</h2>
            <p class="text-gray-700">Pilihan menu yang sehat dengan porsi terkontrol, bahan segar, dan kalori seimbang untuk gaya hidup yang lebih sehat.</p>
        </div>
        <div class="flex justify-center mb-8">
            <button class="bg-lime-700 text-white px-4 py-2 rounded-lg mx-2 hover:bg-lime-400 transition" data-tab="vegan">Vegan</button>
            <button class="bg-lime-700 text-white px-4 py-2 rounded-lg mx-2 hover:bg-lime-400 transition" data-tab="high-protein">High Protein</button>
            <button class="bg-lime-700 text-white px-4 py-2 rounded-lg mx-2 hover:bg-lime-400 transition" data-tab="diet">Diet</button>
        </div>
        <div id="menu-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
    <!-- Product End -->

    <!-- Footer Start -->
    <footer class="bg-lime-800 py-6">
        <div class="container mx-auto text-center text-white">
            <p>&copy; 2023 KaloriKu. All rights reserved.</p>
        </div>
    </footer>
    <!-- Footer End -->

    <script>
        document.querySelectorAll('button[data-tab]').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
                document.getElementById(button.getAttribute('data-tab')).classList.remove('hidden');
            });
        });

        async function fetchMenuData() {
            try {
                const response = await fetch("https://ws-kaloriku-4cf736febaf0.herokuapp.com/menu");
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const menuItems = await response.json();
                const menuContainer = document.getElementById("menu-container");
                menuContainer.innerHTML = "";
                menuItems.forEach(item => {
                    const card = document.createElement("div");
                    card.className = "bg-white p-6 rounded-lg shadow-lg";
                    card.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-full h-80 object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-semibold mb-2">${item.name}</h3>
                        <p class="text-gray-700 mb-2"><strong>Kalori:</strong> ${item.calories} kcal</p>
                        <p class="text-gray-700"><strong>Komposisi:</strong> ${item.ingredients}</p>
                    `;
                    menuContainer.appendChild(card);
                });
            } catch (error) {
                console.error("Error fetching menu data:", error);
                document.getElementById("menu-container").innerHTML = '<p class="text-red-500 text-center">Failed to load menu data. Please try again later.</p>';
            }
        }

        document.addEventListener("DOMContentLoaded", fetchMenuData);
    </script>
</body>

</html>
